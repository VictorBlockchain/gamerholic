{"version":3,"file":"eoa.js","sourceRoot":"","sources":["../../../../../src/components/auth/card/eoa.tsx"],"names":[],"mappings":"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","sourcesContent":["import { walletConnect } from \"wagmi/connectors\";\nimport { useChain } from \"../../../hooks/useChain.js\";\nimport { Spinner } from \"../../../icons/spinner.js\";\nimport { WalletConnectIcon } from \"../../../icons/walletConnectIcon.js\";\nimport { ls } from \"../../../strings.js\";\nimport { Button } from \"../../button.js\";\nimport { useAuthContext } from \"../context.js\";\nimport { useConnectEOA } from \"../hooks/useConnectEOA.js\";\nimport { useWalletConnectAuthConfig } from \"../hooks/useWalletConnectAuthConfig.js\";\nimport { CardContent } from \"./content.js\";\nimport { ConnectionError } from \"./error/connection-error.js\";\nimport { WalletIcon } from \"./error/icons/wallet-icon.js\";\n\nexport const WALLET_CONNECT = \"walletConnect\";\n\nexport const EoaConnectCard = () => {\n  const { setAuthStep, authStep } = useAuthContext(\"eoa_connect\");\n  const { connect } = useConnectEOA();\n  const { chain } = useChain();\n\n  if (authStep.error) {\n    const errorMessage = getErrorMessage(\n      authStep.error,\n      authStep.connector.name\n    );\n    return (\n      <ConnectionError\n        icon={<WalletIcon connector={authStep.connector} />}\n        headerText={errorMessage.heading}\n        bodyText={errorMessage.body}\n        tryAgainCTA={errorMessage.tryAgainCTA}\n        handleTryAgain={() => {\n          setAuthStep({\n            type: \"eoa_connect\",\n            connector: authStep.connector,\n          });\n\n          // Re-try connector's connection...\n          connect({\n            connector: authStep.connector,\n            chainId: chain.id,\n          });\n        }}\n        handleUseAnotherMethod={() => setAuthStep({ type: \"pick_eoa\" })}\n      />\n    );\n  }\n\n  return (\n    <CardContent\n      header={`Connecting to ${authStep.connector.name}`}\n      className={\"gap-0\"}\n      icon={\n        <div className=\"flex relative flex-col items-center justify-center h-[58px] w-[58px] mb-5\">\n          <img\n            className={authStep.error ? undefined : \"animate-pulse\"}\n            src={authStep.connector.icon}\n            alt={authStep.connector.name}\n            height={28}\n            width={28}\n          />\n          <div className=\"absolute top-0 left-0 w-full h-full flex items-center justify-center z-[1]\">\n            <Spinner />\n          </div>\n        </div>\n      }\n      description=\"Please follow the instructions in your wallet to connect.\"\n      error={authStep.error}\n      secondaryButton={{\n        title: \"Cancel\",\n        onClick: async () => {\n          setAuthStep({ type: \"initial\" });\n        },\n      }}\n    />\n  );\n};\n\nexport const WalletConnectCard = () => {\n  const { setAuthStep, authStep } = useAuthContext(\"wallet_connect\");\n  const { walletConnectParams } = useWalletConnectAuthConfig();\n  const { chain } = useChain();\n\n  const walletConnectConnector = walletConnectParams\n    ? walletConnect(walletConnectParams)\n    : null;\n\n  const { connect } = useConnectEOA();\n\n  if (!walletConnectConnector) {\n    setAuthStep({\n      type: \"wallet_connect\",\n      error: new Error(\"WalletConnect params not found\"),\n    });\n\n    return null;\n  }\n\n  if (authStep.error) {\n    const errorMessage = getErrorMessage(authStep.error, WALLET_CONNECT);\n\n    return (\n      <ConnectionError\n        headerText={errorMessage.heading}\n        bodyText={errorMessage.body}\n        tryAgainCTA={errorMessage.tryAgainCTA}\n        icon={<WalletIcon connector={WALLET_CONNECT} />}\n        handleTryAgain={() => {\n          setAuthStep({ type: \"wallet_connect\" });\n          // Re-try wallet connect's connection...\n          connect({\n            connector: walletConnectConnector,\n            chainId: chain.id,\n          });\n        }}\n        handleUseAnotherMethod={() => setAuthStep({ type: \"pick_eoa\" })}\n      />\n    );\n  }\n\n  // If error render the error card here?\n  return (\n    <CardContent\n      header={`Connecting to WalletConnect`}\n      className={\"gap-0\"}\n      icon={\n        <div className=\"flex relative flex-col items-center justify-center h-[58px] w-[58px] mb-5\">\n          <WalletConnectIcon\n            className={\n              \"w-[32px] h-[32px]\" + (authStep.error ? \"\" : \" animate-pulse\")\n            }\n          />\n          <div className=\"absolute top-0 left-0 w-full h-full flex items-center justify-center z-[1]\">\n            <Spinner />\n          </div>\n        </div>\n      }\n      description={\"Please follow the instructions in the popup to connect.\"}\n      error={authStep.error}\n      secondaryButton={{\n        title: \"Cancel\",\n        onClick: async () => {\n          // Ensure to stop all inflight requests\n          setAuthStep({ type: \"initial\" });\n        },\n      }}\n    />\n  );\n};\n\nexport const EoaPickCard = () => {\n  const { chain } = useChain();\n  const { connectors, connect } = useConnectEOA();\n  const { setAuthStep } = useAuthContext(\"pick_eoa\");\n\n  const { walletConnectParams } = useWalletConnectAuthConfig();\n\n  const connectorButtons = connectors\n    .filter((x) => x.type !== WALLET_CONNECT)\n    .map((connector) => {\n      return (\n        <Button\n          className=\"justify-start\"\n          variant=\"social\"\n          key={connector.id}\n          icon={\n            connector.icon && (\n              <img\n                src={connector.icon}\n                alt={connector.name}\n                height={20}\n                width={20}\n              />\n            )\n          }\n          onClick={() => {\n            connect({ connector, chainId: chain.id });\n          }}\n        >\n          {connector.name}\n        </Button>\n      );\n    });\n\n  const walletConnectConnector = walletConnectParams\n    ? walletConnect(walletConnectParams)\n    : null;\n\n  return (\n    <CardContent\n      className=\"w-full\"\n      header=\"Select your wallet\"\n      description={\n        walletConnectConnector != null || connectors.length ? (\n          <div className=\"flex flex-col gap-3 w-full\">\n            {connectorButtons}\n            {walletConnectConnector && (\n              <Button\n                className=\"justify-start\"\n                variant=\"social\"\n                icon={<WalletConnectIcon className=\"w-[25px] h-[25px]\" />}\n                onClick={() => {\n                  // If walletConnectConnector is not found, set the error and return\n                  if (!walletConnectConnector) {\n                    return setAuthStep({\n                      type: \"wallet_connect\",\n                      error: new Error(\"WalletConnect params not found\"),\n                    });\n                  }\n\n                  connect({\n                    connector: walletConnectConnector,\n                    chainId: chain.id,\n                  });\n                }}\n              >\n                WalletConnect\n              </Button>\n            )}\n          </div>\n        ) : (\n          \"No wallets available\"\n        )\n      }\n    />\n  );\n};\n\nconst getErrorMessage = (error: Error, walletName: string) => {\n  if (error.message.includes(\"ChainId not found\")) {\n    return ls.error.customErrorMessages.eoa.walletConnect.chainIdNotFound;\n  }\n\n  if (error.message.includes(\"WalletConnect params not found\")) {\n    return ls.error.customErrorMessages.eoa.walletConnect\n      .walletConnectParamsNotFound;\n  }\n\n  // Use default error message\n  return {\n    ...ls.error.customErrorMessages.eoa.default,\n    heading: `${ls.error.customErrorMessages.eoa.default.heading} ${walletName}`,\n  };\n};\n"]}