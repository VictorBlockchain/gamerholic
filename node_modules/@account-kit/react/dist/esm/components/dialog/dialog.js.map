{"version":3,"file":"dialog.js","sourceRoot":"","sources":["../../../../src/components/dialog/dialog.tsx"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,EACL,WAAW,EACX,SAAS,EACT,eAAe,EACf,MAAM,EACN,QAAQ,GAET,MAAM,OAAO,CAAC;AACf,OAAO,EAAE,YAAY,EAAE,MAAM,WAAW,CAAC;AACzC,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAC;AACnD,OAAO,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAC;AAQ3C;;;;;GAKG;AACH,MAAM,CAAC,MAAM,MAAM,GAAG,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAe,EAAE,EAAE;IACnE,MAAM,CAAC,cAAc,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAE1D,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAExD,MAAM,aAAa,GAAG,MAAM,CAAiB,IAAI,CAAC,CAAC;IAEnD,MAAM,qBAAqB,GAAG,WAAW,CAAC,GAAG,EAAE;QAC7C,OAAO,EAAE,CAAC;IACZ,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;IAEd,eAAe,CAAC,GAAG,EAAE;QACnB,MAAM,UAAU,GAAG,aAAa,CAAC,OAAO,CAAC;QAEzC,IAAI,MAAM,EAAE,CAAC;YACX,eAAe,CAAC,IAAI,CAAC,CAAC;YACtB,OAAO;QACT,CAAC;QAED,MAAM,mBAAmB,GAAG,GAAG,EAAE;YAC/B,eAAe,CAAC,KAAK,CAAC,CAAC;QACzB,CAAC,CAAC;QAEF,UAAU,EAAE,gBAAgB,CAAC,cAAc,EAAE,mBAAmB,CAAC,CAAC;QAElE,OAAO,GAAG,EAAE;YACV,UAAU,EAAE,mBAAmB,CAAC,cAAc,EAAE,mBAAmB,CAAC,CAAC;QACvE,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEb,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,YAAY,GAAG,CAAC,KAAoB,EAAE,EAAE;YAC5C,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,IAAI,MAAM,EAAE,CAAC;gBACrC,OAAO,EAAE,CAAC;YACZ,CAAC;QACH,CAAC,CAAC;QAEF,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;QACnD,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;IACrE,CAAC,EAAE,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC;IAEtB,SAAS,CAAC,GAAG,EAAE;QACb,4BAA4B;QAC5B,eAAe,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC;IACzE,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,OAAO,YAAY;QACjB,CAAC,CAAC,YAAY,CACV,KAAC,YAAY,IAAC,OAAO,EAAE,cAAc,YAEnC,kCAEE,IAAI,EAAC,QAAQ,EACb,SAAS,EAAE,yGACT,MAAM,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,oBAC3B,EAAE,EACF,OAAO,EAAE,qBAAqB,YAE9B,KAAC,SAAS,cACR,cACE,GAAG,EAAE,aAAa,EAClB,SAAS,EAAE,qCACT,MAAM,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,oBAChC,EAAE,EACF,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,eAAe,EAAE,YAE1C,QAAQ,GACL,GACI,GACR,GACO,EACf,QAAQ,CAAC,IAAI,CACd;QACH,CAAC,CAAC,IAAI,CAAC;AACX,CAAC,CAAC","sourcesContent":["\"use client\";\n\nimport {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n  type ReactNode,\n} from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { RemoveScroll } from \"react-remove-scroll\";\nimport { FocusTrap } from \"./focustrap.js\";\n\ntype DialogProps = {\n  isOpen: boolean;\n  onClose: () => void;\n  children: ReactNode;\n};\n\n/**\n * Dialog component that renders a modal dialog.\n *\n * @param {DialogProps} props - The props for the Dialog component.\n * @returns {JSX.Element | null} The rendered Dialog component.\n */\nexport const Dialog = ({ isOpen, onClose, children }: DialogProps) => {\n  const [isScrollLocked, setScrollLocked] = useState(false);\n\n  const [renderPortal, setRenderPortal] = useState(false);\n\n  const dialogCardRef = useRef<HTMLDivElement>(null);\n\n  const handleBackgroundClick = useCallback(() => {\n    onClose();\n  }, [onClose]);\n\n  useLayoutEffect(() => {\n    const dialogCard = dialogCardRef.current;\n\n    if (isOpen) {\n      setRenderPortal(true);\n      return;\n    }\n\n    const renderPortalHandler = () => {\n      setRenderPortal(false);\n    };\n\n    dialogCard?.addEventListener(\"animationend\", renderPortalHandler);\n\n    return () => {\n      dialogCard?.removeEventListener(\"animationend\", renderPortalHandler);\n    };\n  }, [isOpen]);\n\n  useEffect(() => {\n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === \"Escape\" && isOpen) {\n        onClose();\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleEscape);\n    return () => document.removeEventListener(\"keydown\", handleEscape);\n  }, [isOpen, onClose]);\n\n  useEffect(() => {\n    // Has to run in the browser\n    setScrollLocked(getComputedStyle(document.body).overflow !== \"hidden\");\n  }, []);\n\n  return renderPortal\n    ? createPortal(\n        <RemoveScroll enabled={isScrollLocked}>\n          {/* Overlay */}\n          <div\n            aria-modal\n            role=\"dialog\"\n            className={`fixed inset-0 bg-black/80 flex items-end md:items-center justify-center z-[999999] transition-opacity ${\n              isOpen ? \"opacity-100\" : \"opacity-0 delay-75\"\n            }`}\n            onClick={handleBackgroundClick}\n          >\n            <FocusTrap>\n              <div\n                ref={dialogCardRef}\n                className={`max-md:w-screen md:max-w-sm block ${\n                  isOpen ? \"animate-slide-up\" : \"animate-slide-down\"\n                }`}\n                onClick={(event) => event.stopPropagation()}\n              >\n                {children}\n              </div>\n            </FocusTrap>\n          </div>\n        </RemoveScroll>,\n        document.body\n      )\n    : null;\n};\n"]}