{"version":3,"file":"module.js","sourceRoot":"","sources":["../../../../../../src/ma-v2/modules/time-range-module/module.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,mBAAmB,EAA0B,MAAM,MAAM,CAAC;AAEnE,OAAO,EAAE,kBAAkB,EAAE,MAAM,8BAA8B,CAAC;AAClE,OAAO,EAAE,QAAQ,EAAmB,MAAM,+BAA+B,CAAC;AAE1E,MAAM,CAAC,MAAM,eAAe,GAAG;IAC7B,GAAG,EAAE,kBAAkB;IACvB,SAAS,EAAE,CACT,WAIC,EACD,OAAgB,EAC2B,EAAE;QAC7C,IAAI,WAAW,CAAC,UAAU,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC;YACzC,MAAM,IAAI,KAAK,CACb,0DAA0D,CAC3D,CAAC;QACJ,CAAC;QAED,IAAI,WAAW,CAAC,UAAU,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC;YACzC,MAAM,IAAI,KAAK,CACb,0DAA0D,CAC3D,CAAC;QACJ,CAAC;QAED,MAAM,WAAW,GAAG,eAAe,CAAC,mBAAmB,CAAC,WAAW,CAAC,CAAC;QACrE,OAAO;YACL,UAAU,EAAE;gBACV,OAAO,EAAE,OAAO;gBAChB,QAAQ,EAAE,WAAW,CAAC,QAAQ;gBAC9B,QAAQ,EAAE,QAAQ,CAAC,UAAU;gBAC7B,WAAW,EAAE,KAAK;gBAClB,YAAY,EAAE,KAAK;aACpB;YACD,QAAQ,EAAE,WAAW;SACtB,CAAC;IACJ,CAAC;IACD,mBAAmB,EAAE,CAAC,IAIrB,EAAO,EAAE;QACR,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;QAElD,OAAO,mBAAmB,CACxB;YACE;gBACE,IAAI,EAAE,QAAQ;aACf;YACD;gBACE,IAAI,EAAE,QAAQ;aACf;YACD;gBACE,IAAI,EAAE,QAAQ;aACf;SACF,EACD,CAAC,QAAQ,EAAE,UAAU,EAAE,UAAU,CAAC,CACnC,CAAC;IACJ,CAAC;IACD,qBAAqB,EAAE,CAAC,IAA0B,EAAO,EAAE;QACzD,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC;QAE1B,OAAO,mBAAmB,CACxB;YACE;gBACE,IAAI,EAAE,QAAQ;aACf;SACF,EACD,CAAC,QAAQ,CAAC,CACX,CAAC;IACJ,CAAC;IACD,kBAAkB,EAAE,CAAC,IAIpB,EAAO,EAAE;QACR,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;QAElD,OAAO,mBAAmB,CACxB;YACE;gBACE,IAAI,EAAE,QAAQ;aACf;YACD;gBACE,IAAI,EAAE,QAAQ;aACf;YACD;gBACE,IAAI,EAAE,QAAQ;aACf;SACF,EACD,CAAC,QAAQ,EAAE,UAAU,EAAE,UAAU,CAAC,CACnC,CAAC;IACJ,CAAC;CACF,CAAC","sourcesContent":["import { encodeAbiParameters, type Address, type Hex } from \"viem\";\n\nimport { timeRangeModuleAbi } from \"./abis/timeRangeModuleAbi.js\";\nimport { HookType, type HookConfig } from \"../../actions/common/types.js\";\n\nexport const TimeRangeModule = {\n  abi: timeRangeModuleAbi,\n  buildHook: (\n    installArgs: {\n      entityId: number;\n      validUntil: number;\n      validAfter: number;\n    },\n    address: Address\n  ): { hookConfig: HookConfig; initData: Hex } => {\n    if (installArgs.validUntil > 2 ** 48 - 1) {\n      throw new Error(\n        \"TimeRangeModule.buildHook: validUntil > type(uint48).max\"\n      );\n    }\n\n    if (installArgs.validAfter > 2 ** 48 - 1) {\n      throw new Error(\n        \"TimeRangeModule.buildHook: validAfter > type(uint48).max\"\n      );\n    }\n\n    const installData = TimeRangeModule.encodeOnInstallData(installArgs);\n    return {\n      hookConfig: {\n        address: address,\n        entityId: installArgs.entityId,\n        hookType: HookType.VALIDATION,\n        hasPreHooks: false,\n        hasPostHooks: false,\n      },\n      initData: installData,\n    };\n  },\n  encodeOnInstallData: (args: {\n    entityId: number;\n    validUntil: number;\n    validAfter: number;\n  }): Hex => {\n    const { entityId, validUntil, validAfter } = args;\n\n    return encodeAbiParameters(\n      [\n        {\n          type: \"uint32\",\n        },\n        {\n          type: \"uint48\",\n        },\n        {\n          type: \"uint48\",\n        },\n      ],\n      [entityId, validUntil, validAfter]\n    );\n  },\n  encodeOnUninstallData: (args: { entityId: number }): Hex => {\n    const { entityId } = args;\n\n    return encodeAbiParameters(\n      [\n        {\n          type: \"uint32\",\n        },\n      ],\n      [entityId]\n    );\n  },\n  encodeSetTimeRange: (args: {\n    entityId: number;\n    validUntil: number;\n    validAfter: number;\n  }): Hex => {\n    const { entityId, validUntil, validAfter } = args;\n\n    return encodeAbiParameters(\n      [\n        {\n          type: \"uint32\",\n        },\n        {\n          type: \"uint48\",\n        },\n        {\n          type: \"uint48\",\n        },\n      ],\n      [entityId, validUntil, validAfter]\n    );\n  },\n};\n"]}